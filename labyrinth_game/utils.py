#!/usr/bin/env python3
"""–ú–æ–¥—É–ª—å —Å –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –¥–ª—è –∏–≥—Ä—ã."""

import math

import constants
import player_actions


def describe_current_room(game_state):
    """
    –í—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç—ã.
    
    Args:
        game_state (dict): –°–ª–æ–≤–∞—Ä—å —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏–≥—Ä—ã
    """
    current_room_name = game_state['current_room']
    room_data = constants.ROOMS[current_room_name]
    
    # –í—ã–≤–æ–¥–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã
    print(f"\n== {current_room_name.upper()} ==")
    
    # –í—ã–≤–æ–¥–∏–º –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã
    print(f"{room_data['description']}")
    
    # –í—ã–≤–æ–¥–∏–º –ø—Ä–µ–¥–º–µ—Ç—ã, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å
    if room_data['items']:
        print("\nüì¶ –ó–∞–º–µ—Ç–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã:")
        for item in room_data['items']:
            print(f"   - {item}")
    
    # –í—ã–≤–æ–¥–∏–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤—ã—Ö–æ–¥—ã
    if room_data['exits']:
        print("\nüö™ –í—ã—Ö–æ–¥—ã:")
        for direction, target_room in room_data['exits'].items():
            print(f"   {direction} ‚Üí {target_room}")
    
    # –í—ã–≤–æ–¥–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–≥–∞–¥–∫–µ
    if room_data['puzzle'] is not None:
        print("\n‚ùì –ö–∞–∂–µ—Ç—Å—è, –∑–¥–µ—Å—å –µ—Å—Ç—å –∑–∞–≥–∞–¥–∫–∞ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É solve).")


def get_available_directions(game_state):
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∏–∑ —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç—ã.
    
    Args:
        game_state (dict): –°–ª–æ–≤–∞—Ä—å —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏–≥—Ä—ã
        
    Returns:
        list: –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π
    """
    current_room_name = game_state['current_room']
    room_data = constants.ROOMS[current_room_name]
    return list(room_data['exits'].keys())


def room_has_puzzle(game_state):
    """
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ –≤ —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç–µ –∑–∞–≥–∞–¥–∫–∞.
    
    Args:
        game_state (dict): –°–ª–æ–≤–∞—Ä—å —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏–≥—Ä—ã
        
    Returns:
        bool: True –µ—Å–ª–∏ –µ—Å—Ç—å –∑–∞–≥–∞–¥–∫–∞, –∏–Ω–∞—á–µ False
    """
    current_room_name = game_state['current_room']
    room_data = constants.ROOMS[current_room_name]
    return room_data['puzzle'] is not None


def solve_puzzle(game_state):
    """
    –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏–≥—Ä–æ–∫—É —Ä–µ—à–∏—Ç—å –∑–∞–≥–∞–¥–∫—É –≤ —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç–µ.
    
    Args:
        game_state (dict): –°–ª–æ–≤–∞—Ä—å —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏–≥—Ä—ã
    """
    current_room_name = game_state['current_room']
    room_data = constants.ROOMS[current_room_name]
    
    # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –µ—Å—Ç—å –ª–∏ –∑–∞–≥–∞–¥–∫–∞ –≤ —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç–µ
    if room_data['puzzle'] is None:
        print("–ó–∞–≥–∞–¥–æ–∫ –∑–¥–µ—Å—å –Ω–µ—Ç.")
        return
    
    # –ï—Å–ª–∏ –∑–∞–≥–∞–¥–∫–∞ –µ—Å—Ç—å, –≤—ã–≤–µ–¥–∏—Ç–µ –Ω–∞ —ç–∫—Ä–∞–Ω –≤–æ–ø—Ä–æ—Å
    question, correct_answer = room_data['puzzle']
    print(f"\nüß© –ó–ê–ì–ê–î–ö–ê: {question}")
    
    # –ü–æ–ª—É—á–∏—Ç–µ –æ—Ç–≤–µ—Ç –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    user_answer = player_actions.get_input("–í–∞—à –æ—Ç–≤–µ—Ç: ")
    
    # –°—Ä–∞–≤–Ω–∏—Ç–µ –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –æ—Ç–≤–µ—Ç–æ–º
    # –î–æ–±–∞–≤—å—Ç–µ –≤ –ª–æ–≥–∏–∫—É –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç–≤–µ—Ç–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
    correct_answers = [correct_answer]
    
    # –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –æ—Ç–≤–µ—Ç–∞ '10' –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ç–∞–∫–∂–µ '–¥–µ—Å—è—Ç—å'
    if correct_answer == '10':
        correct_answers.extend(['–¥–µ—Å—è—Ç—å', '10', 'ten'])
    elif correct_answer == '7':
        correct_answers.extend(['—Å–µ–º—å', '7', 'seven'])
    elif correct_answer == '—à–∞–≥ —à–∞–≥ —à–∞–≥':
        correct_answers.extend(['—à–∞–≥ —à–∞–≥ —à–∞–≥', 'step step step'])
    elif correct_answer == '—Ä–µ–∑–æ–Ω–∞–Ω—Å':
        correct_answers.extend(['—Ä–µ–∑–æ–Ω–∞–Ω—Å', 'resonance'])
    elif correct_answer == '–¥—ã—Ö–∞–Ω–∏–µ':
        correct_answers.extend(['–¥—ã—Ö–∞–Ω–∏–µ', 'breath'])
    
    if user_answer in correct_answers:
        # –ï—Å–ª–∏ –æ—Ç–≤–µ—Ç –≤–µ—Ä–Ω—ã–π:
        print("‚úÖ –í–µ—Ä–Ω–æ! –ó–∞–≥–∞–¥–∫–∞ —Ä–µ—à–µ–Ω–∞.")
        # –£–±–µ—Ä–∏—Ç–µ –∑–∞–≥–∞–¥–∫—É –∏–∑ –∫–æ–º–Ω–∞—Ç—ã, —á—Ç–æ–±—ã –µ–µ –Ω–µ–ª—å–∑—è –±—ã–ª–æ —Ä–µ—à–∏—Ç—å –¥–≤–∞–∂–¥—ã
        room_data['puzzle'] = None
        
        # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–¥–µ–ª–∞–ª–∏ –Ω–∞–≥—Ä–∞–¥—É –∑–∞ —Ä–µ—à–µ–Ω–∏–µ –∑–∞–≥–∞–¥–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ–π –æ—Ç –∫–æ–º–Ω–∞—Ç—ã
        if current_room_name == 'hall':
            game_state['player_inventory'].append('silver_amulet')
            print("–í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –Ω–∞–≥—Ä–∞–¥—É: silver_amulet!")
        elif current_room_name == 'trap_room':
            game_state['player_inventory'].append('trap_manual')
            print("–í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –Ω–∞–≥—Ä–∞–¥—É: trap_manual!")
        elif current_room_name == 'library':
            game_state['player_inventory'].append('wisdom_scroll')
            print("–í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –Ω–∞–≥—Ä–∞–¥—É: wisdom_scroll!")
        elif current_room_name == 'garden':
            game_state['player_inventory'].append('enchanted_seed')
            print("–í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –Ω–∞–≥—Ä–∞–¥—É: enchanted_seed!")
        elif current_room_name == 'fountain':
            game_state['player_inventory'].append('rainbow_pearl')
            print("–í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –Ω–∞–≥—Ä–∞–¥—É: rainbow_pearl!")
        else:
            # –ù–∞–≥—Ä–∞–¥–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            game_state['player_inventory'].append('reward')
            print("–í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –Ω–∞–≥—Ä–∞–¥—É: reward!")
    
    else:
        # –ï—Å–ª–∏ –æ—Ç–≤–µ—Ç –Ω–µ–≤–µ—Ä–Ω—ã–π, —Å–æ–æ–±—â–∏—Ç–µ –æ–± —ç—Ç–æ–º –∏–≥—Ä–æ–∫—É
        print("‚ùå –ù–µ–≤–µ—Ä–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.")
        
        # –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –¥–∞–µ—Ç –Ω–µ–≤–µ—Ä–Ω—ã–π –æ—Ç–≤–µ—Ç –≤ trap_room, –≤—ã–∑–æ–≤–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é trigger_trap()
        if current_room_name == 'trap_room':
            print("–ù–µ–≤–µ—Ä–Ω—ã–π –æ—Ç–≤–µ—Ç –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –∑–∞—â–∏—Ç–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º!")
            trigger_trap(game_state)


def attempt_open_treasure(game_state):
    """
    –†–µ–∞–ª–∏–∑—É–µ—Ç –ª–æ–≥–∏–∫—É –ø–æ–±–µ–¥—ã - –æ—Ç–∫—Ä—ã—Ç–∏–µ —Å—É–Ω–¥—É–∫–∞ —Å —Å–æ–∫—Ä–æ–≤–∏—â–∞–º–∏.
    
    Args:
        game_state (dict): –°–ª–æ–≤–∞—Ä—å —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏–≥—Ä—ã
    """
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª—é—á–∞: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –µ—Å—Ç—å –ª–∏ —É –∏–≥—Ä–æ–∫–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ 'treasure_key'
    if 'treasure_key' in game_state['player_inventory']:
        # –ï—Å–ª–∏ –∫–ª—é—á –µ—Å—Ç—å, –≤—ã–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∑–∞–º–∫–∞
        print("–í—ã –ø—Ä–∏–º–µ–Ω—è–µ—Ç–µ –∫–ª—é—á, –∏ –∑–∞–º–æ–∫ —â—ë–ª–∫–∞–µ—Ç. –°—É–Ω–¥—É–∫ –æ—Ç–∫—Ä—ã—Ç!")
        # –£–¥–∞–ª–∏—Ç–µ 'treasure_chest' –∏–∑ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∫–æ–º–Ω–∞—Ç—ã
        current_room = constants.ROOMS[game_state['current_room']]
        if 'treasure_chest' in current_room['items']:
            current_room['items'].remove('treasure_chest')
        # –°–æ–æ–±—â–∏—Ç–µ –∏–≥—Ä–æ–∫—É –æ –ø–æ–±–µ–¥–µ
        print("–í —Å—É–Ω–¥—É–∫–µ —Å–æ–∫—Ä–æ–≤–∏—â–µ! –í—ã –ø–æ–±–µ–¥–∏–ª–∏!")
        # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é game_over –≤ True
        game_state['game_over'] = True
    else:
        # –ï—Å–ª–∏ –∫–ª—é—á–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ –Ω–µ—Ç, —Å—É–Ω–¥—É–∫ –≤—Å–µ –µ—â–µ –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –∫–æ–¥–æ–º
        # –°–ø—Ä–æ—Å–∏—Ç–µ —É –∏–≥—Ä–æ–∫–∞, —Ö–æ—á–µ—Ç –ª–∏ –æ–Ω –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤–≤–µ—Å—Ç–∏ –∫–æ–¥
        prompt = "–°—É–Ω–¥—É–∫ –∑–∞–ø–µ—Ä—Ç. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤–≤–µ—Å—Ç–∏ –∫–æ–¥? (–¥–∞/–Ω–µ—Ç): "
        response = player_actions.get_input(prompt)
        
        if response == '–¥–∞':
            # –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –æ—Ç–≤–µ—á–∞–µ—Ç "–¥–∞", –∑–∞–ø—Ä–æ—Å–∏—Ç–µ —É –Ω–µ–≥–æ –∫–æ–¥
            code = player_actions.get_input("–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥: ")
            # –°—Ä–∞–≤–Ω–∏—Ç–µ –≤–≤–µ–¥–µ–Ω–Ω—ã–π –∫–æ–¥ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –æ—Ç–≤–µ—Ç–æ–º –∏–∑ puzzle –¥–ª—è —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç—ã
            current_room = constants.ROOMS[game_state['current_room']]
            if current_room['puzzle'] is not None:
                _, correct_code = current_room['puzzle']
                if code == correct_code:
                    # –ï—Å–ª–∏ –∫–æ–¥ –≤–µ—Ä–Ω—ã–π, –≤—ã–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
                    print("‚úÖ –ö–æ–¥ –≤–µ—Ä–Ω—ã–π! –ó–∞–º–æ–∫ —â—ë–ª–∫–∞–µ—Ç.")
                    # –£–¥–∞–ª–∏—Ç–µ —Å—É–Ω–¥—É–∫
                    if 'treasure_chest' in current_room['items']:
                        current_room['items'].remove('treasure_chest')
                    # –û–±—ä—è–≤–∏—Ç–µ –æ –ø–æ–±–µ–¥–µ
                    print("–í —Å—É–Ω–¥—É–∫–µ —Å–æ–∫—Ä–æ–≤–∏—â–µ! –í—ã –ø–æ–±–µ–¥–∏–ª–∏!")
                    # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ game_over –≤ True
                    game_state['game_over'] = True
                else:
                    # –ï—Å–ª–∏ –∫–æ–¥ –Ω–µ–≤–µ—Ä–Ω—ã–π, —Å–æ–æ–±—â–∏—Ç–µ –æ–± –æ—à–∏–±–∫–µ
                    print("‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥. –°—É–Ω–¥—É–∫ –æ—Å—Ç–∞–µ—Ç—Å—è –∑–∞–ø–µ—Ä—Ç—ã–º.")
            else:
                print("–ó–¥–µ—Å—å –Ω–µ—Ç –∑–∞–≥–∞–¥–∫–∏ —Å –∫–æ–¥–æ–º.")
        else:
            # –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –æ—Ç–∫–∞–∑–∞–ª—Å—è –≤–≤–æ–¥–∏—Ç—å –∫–æ–¥
            print("–í—ã –æ—Ç—Å—Ç—É–ø–∞–µ—Ç–µ –æ—Ç —Å—É–Ω–¥—É–∫–∞.")


def show_help():
    """
    –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥.
    """
    print("\n–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:")
    print("  go <direction>  - –ø–µ—Ä–µ–π—Ç–∏ –≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ (north/south/east/west)")
    print("  look            - –æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â—É—é –∫–æ–º–Ω–∞—Ç—É")
    print("  take <item>     - –ø–æ–¥–Ω—è—Ç—å –ø—Ä–µ–¥–º–µ—Ç")
    print("  use <item>      - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç –∏–∑ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è")
    print("  inventory       - –ø–æ–∫–∞–∑–∞—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å")
    print("  solve           - –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è —Ä–µ—à–∏—Ç—å –∑–∞–≥–∞–¥–∫—É –≤ –∫–æ–º–Ω–∞—Ç–µ")
    print("  quit            - –≤—ã–π—Ç–∏ –∏–∑ –∏–≥—Ä—ã")
    print("  help            - –ø–æ–∫–∞–∑–∞—Ç—å —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ")


def pseudo_random(seed, modulo):
    """
    –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Å–µ–≤–¥–æ—Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ [0, modulo).
    
    Args:
        seed (int): –¶–µ–ª–æ–µ —á–∏—Å–ª–æ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞
        modulo (int): –¶–µ–ª–æ–µ —á–∏—Å–ª–æ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–∏–∞–ø–∞–∑–æ–Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        
    Returns:
        int: –¶–µ–ª–æ–µ —á–∏—Å–ª–æ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ [0, modulo)
    """
    # –í–æ–∑—å–º–∏—Ç–µ —Å–∏–Ω—É—Å –æ—Ç seed, —É–º–Ω–æ–∂–µ–Ω–Ω–æ–≥–æ –Ω–∞ –±–æ–ª—å—à–æ–µ —á–∏—Å–ª–æ —Å –¥—Ä–æ–±–Ω–æ–π —á–∞—Å—Ç—å—é
    sin_value = math.sin(seed * 12.9898)
    
    # –†–µ–∑—É–ª—å—Ç–∞—Ç —É–º–Ω–æ–∂—å—Ç–µ –Ω–∞ –¥—Ä—É–≥–æ–µ –±–æ–ª—å—à–æ–µ —á–∏—Å–ª–æ —Å –¥—Ä–æ–±–Ω–æ–π —á–∞—Å—Ç—å—é
    multiplied_value = sin_value * 43758.5453
    
    # –û—Ç –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ —á–∏—Å–ª–∞ –Ω–∞–º –Ω—É–∂–Ω–∞ —Ç–æ–ª—å–∫–æ –µ–≥–æ –¥—Ä–æ–±–Ω–∞—è —á–∞—Å—Ç—å
    fractional_part = multiplied_value - math.floor(multiplied_value)
    
    # –£–º–Ω–æ–∂—å—Ç–µ —ç—Ç—É –¥—Ä–æ–±–Ω—É—é —á–∞—Å—Ç—å –Ω–∞ modulo
    scaled_value = fractional_part * modulo
    
    # –û—Ç–±—Ä–æ—Å—å—Ç–µ –¥—Ä–æ–±–Ω—É—é —á–∞—Å—Ç—å –∏ –≤–µ—Ä–Ω–∏—Ç–µ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ
    return math.floor(scaled_value)


def trigger_trap(game_state):
    """
    –ò–º–∏—Ç–∏—Ä—É–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ –ª–æ–≤—É—à–∫–∏ —Å –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–º–∏ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è–º–∏ –¥–ª—è –∏–≥—Ä–æ–∫–∞.
    
    Args:
        game_state (dict): –°–ª–æ–≤–∞—Ä—å —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏–≥—Ä—ã
    """
    # –í—ã–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, —á—Ç–æ –ª–æ–≤—É—à–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞
    print("–õ–æ–≤—É—à–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞! –ü–æ–ª —Å—Ç–∞–ª –¥—Ä–æ–∂–∞—Ç—å...")
    
    # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –µ—Å—Ç—å –ª–∏ —É –∏–≥—Ä–æ–∫–∞ –ø—Ä–µ–¥–º–µ—Ç—ã –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ
    if game_state['player_inventory']:
        # –ï—Å–ª–∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –Ω–µ –ø—É—Å—Ç, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é pseudo_random()
        # —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å —Å–ª—É—á–∞–π–Ω—ã–π –∏–Ω–¥–µ–∫—Å –ø—Ä–µ–¥–º–µ—Ç–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ
        item_count = len(game_state['player_inventory'])
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–º–±–∏–Ω–∞—Ü–∏—é —à–∞–≥–æ–≤ –∏ —Å—á–µ—Ç—á–∏–∫–∞ –ª–æ–≤—É—à–µ–∫ –¥–ª—è —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏
        trap_seed = game_state['steps_taken'] + game_state['traps_triggered']
        random_index = pseudo_random(trap_seed, item_count)
        
        # –£–¥–∞–ª–∏—Ç–µ —ç—Ç–æ—Ç –ø—Ä–µ–¥–º–µ—Ç
        lost_item = game_state['player_inventory'].pop(random_index)
        
        # –°–æ–æ–±—â–∏—Ç–µ –∏–≥—Ä–æ–∫—É, –∫–∞–∫–æ–π –∏–º–µ–Ω–Ω–æ –ø—Ä–µ–¥–º–µ—Ç –æ–Ω –ø–æ—Ç–µ—Ä—è–ª
        print(f"–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –ø—Ä–µ–¥–º–µ—Ç: {lost_item}")
    else:
        # –ï—Å–ª–∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç, –∏–≥—Ä–æ–∫ –ø–æ–ª—É—á–∞–µ—Ç "—É—Ä–æ–Ω"
        # –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ pseudo_random(), —á—Ç–æ–±—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —á–∏—Å–ª–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç 0 –¥–æ 9)
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–º–±–∏–Ω–∞—Ü–∏—é –¥–ª—è –±–æ–ª—å—à–µ–π —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏
        trap_seed = game_state['steps_taken'] + game_state['traps_triggered']
        damage_roll = pseudo_random(trap_seed, 10)
        
        # –ï—Å–ª–∏ —á–∏—Å–ª–æ –º–µ–Ω—å—à–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞ (3), –∏–≥—Ä–∞ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è
        if damage_roll < 3:
            # –í—ã–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ—Ä–∞–∂–µ–Ω–∏–∏
            print("–õ–æ–≤—É—à–∫–∞ –Ω–∞–Ω–æ—Å–∏—Ç —Å–º–µ—Ä—Ç–µ–ª—å–Ω—ã–π —É–¥–∞—Ä! –í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏.")
            # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ game_over –≤ True
            game_state['game_over'] = True
        else:
            # –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –≤—ã–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, —á—Ç–æ –∏–≥—Ä–æ–∫ —É—Ü–µ–ª–µ–ª
            print("–í–∞–º —É–¥–∞–ª–æ—Å—å —É–≤–µ—Ä–Ω—É—Ç—å—Å—è –æ—Ç –ª–æ–≤—É—à–∫–∏!")

def random_event(game_state):
    """
    –°–æ–∑–¥–∞–µ—Ç –Ω–µ–±–æ–ª—å—à–∏–µ —Å–ª—É—á–∞–π–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –≤–æ –≤—Ä–µ–º—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞.
    
    Args:
        game_state (dict): –°–ª–æ–≤–∞—Ä—å —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏–≥—Ä—ã
    """
    # –°–Ω–∞—á–∞–ª–∞ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –ª–∏ —Å–æ–±—ã—Ç–∏–µ –≤–æ–æ–±—â–µ
    # –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ pseudo_random() —Å modulo (–Ω–∞–ø—Ä–∏–º–µ—Ä, 10), 
    # —á—Ç–æ–±—ã —Å–æ–±—ã—Ç–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ —Å –Ω–∏–∑–∫–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é
    event_chance = pseudo_random(game_state['steps_taken'], 10)
    
    # –ï—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–≤–µ–Ω 0, —Å–æ–±—ã—Ç–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
    if event_chance == 0:
        # –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ pseudo_random() –µ—â–µ —Ä–∞–∑, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å, 
        # –∫–∞–∫–æ–µ –∏–º–µ–Ω–Ω–æ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π —Å–ª—É—á–∏—Ç—Å—è
        event_type = pseudo_random(game_state['steps_taken'] + 1, 3)
        
        # –°—Ü–µ–Ω–∞—Ä–∏–∏:
        match event_type:
            case 0:
                # –°—Ü–µ–Ω–∞—Ä–∏–π 1 (–ù–∞—Ö–æ–¥–∫–∞): –ò–≥—Ä–æ–∫ –Ω–∞—Ö–æ–¥–∏—Ç –Ω–∞ –ø–æ–ª—É –º–æ–Ω–µ—Ç–∫—É
                print("–í—ã –∑–∞–º–µ—Ç–∏–ª–∏ —á—Ç–æ-—Ç–æ –±–ª–µ—Å—Ç—è—â–µ–µ –Ω–∞ –ø–æ–ª—É...")
                print("–≠—Ç–æ –º–æ–Ω–µ—Ç–∫–∞!")
                # –î–æ–±–∞–≤—å—Ç–µ 'coin' –≤ —Å–ø–∏—Å–æ–∫ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç—ã
                current_room = constants.ROOMS[game_state['current_room']]
                current_room['items'].append('coin')
            
            case 1:
                # –°—Ü–µ–Ω–∞—Ä–∏–π 2 (–ò—Å–ø—É–≥): –ò–≥—Ä–æ–∫ —Å–ª—ã—à–∏—Ç —à–æ—Ä–æ—Ö
                print("–í—ã —Å–ª—ã—à–∏—Ç–µ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–π —à–æ—Ä–æ—Ö –≤ —Ç–µ–º–Ω–æ—Ç–µ...")
                # –ï—Å–ª–∏ —É –∏–≥—Ä–æ–∫–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ –µ—Å—Ç—å 'sword', 
                # –≤—ã–≤–µ–¥–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
                if 'sword' in game_state['player_inventory']:
                    print("–í—ã –¥–æ—Å—Ç–∞–µ—Ç–µ –º–µ—á, –∏ —à–æ—Ä–æ—Ö –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —Å—Ç–∏—Ö–∞–µ—Ç.")
                else:
                    print("–®–æ—Ä–æ—Ö –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –∑–∞—Ç–∏—Ö–∞–µ—Ç.")
            
            case 2:
                # –°—Ü–µ–Ω–∞—Ä–∏–π 3 (–°—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ –ª–æ–≤—É—à–∫–∏): 
                # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –∏–≥—Ä–æ–∫ –≤ trap_room 
                # –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ª–∏ —É –Ω–µ–≥–æ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ 'torch'
                if (game_state['current_room'] == 'trap_room' and 
                    'torch' not in game_state['player_inventory']):
                    # –ï—Å–ª–∏ –æ–±–∞ —É—Å–ª–æ–≤–∏—è –≤–µ—Ä–Ω—ã, –≤—ã–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ–ø–∞—Å–Ω–æ—Å—Ç–∏
                    print("–í —Ç–µ–º–Ω–æ—Ç–µ –≤—ã –Ω–µ –∑–∞–º–µ—Ç–∏–ª–∏ –ª–æ–≤—É—à–∫—É!")
                    # –í—ã–∑–æ–≤–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é trigger_trap()
                    trigger_trap(game_state)
                else:
                    # –ï—Å–ª–∏ —É—Å–ª–æ–≤–∏—è –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã, –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
                    pass